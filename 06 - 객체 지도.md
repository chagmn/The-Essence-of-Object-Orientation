# 6장. 객체 지도
소프트웨어 제품의 설계에는 2가지 측면이 존재한다.
1. 기능 측면의 설계 
  -> 사용자를 위해서 `무엇을` 할 수 있는가? 
2. 구조 측면의 설계
  -> 제품의 형태가 `어떻게` 되어있는가?
  
그럼 훌륭한 소프트웨어는 2가지 측면을 모두 잘 설계되어야하나? 당연하다.
사용자들에게 훌륭한 기능을 제공함과 동시에 사용자들이 원하는 기능을 빠르고 안정적이게 추가할 수 있어야 한다.
사용자들의 요구사항은 언제든지 변할 수 있으므로 변경사항을 미리 예측하는 것이 아니라 언제든지 변경사항을 수용할 수 있게 설계를 해야한다.


## 구조 - 도메인 모델
> 구조 => 사용자나 이해관계자들이 도메인에 관해 생각하는 개념과 개념들 간의 관계로 표현
> 도메인 모델링 => 구조를 수집하고 표현하기 위한 기법
> 도메인 모델 => 도메인 모델링의 활동 결과물

모든 소프트웨어는 사용자의 필요성을 충족시키기 위해 존재한다.
ex) 대학에서의 학생 정보를 갖고 기록하기 위한 소프트웨어, 병원에서의 환자들의 진료기록을 보관하기 위한 소프트웨어, 은행에서의 자산 관리 및 보호하기 위한 소프트웨어 등등..

도메인은 사용자가 프로그램을 사용하는 대상 분야를 칭한다.
모델은 복잡성을 관리하기 위해 사용하는 기본적인 도구. 대상을 추상화하고 단순화한 것이다.
=> `도메인 모델 = 사용자가 프로그램을 사용하는 대상 영역에 관한 지식을 선택적으로 단순화하고 의식적으로 구조화한 형태`

즉, 도메인 모델은 사용자들이 도메인을 바라보는 관점, 설계자가 시스템을 바라보는 관점, 소프트웨어안에 구현된 코드 그자체다.
객체지향은 위의 3가지 측면을 모두 만족시킬 수 있는 거의 유일한 모델링 패러다임으로 객체지향을 이용하면 도메인에 대한 사용자 모델, 디자인 모델, 시스템 이미지 모두 유사한 모습을 유지하도록 만드는 것이 가능하다.
=> 객체지향의 이런 특징을 `연결완전성` 또는 `표현적 차이` 이라 한다.

표현적 차이는 소프트웨어 객체와 현실 객체 사이의 의미적 거리를 가리키는데 핵심은 `은유`를 통해서 이 사이의 차이를 최대한 줄이는 것이다.
`은유`를 사용해 사용자가 도메인을 바라보는 관점 그대로를 코드에 녹여내기 위해 도메인 모델을 기반으로 설계하고 구현하는 것이다.
그럼 표현적 차이는 줄어들게 되고 사용자들이 생각하는 모델 (멘탈 모델)이 코드에 나타날 것이다. 
그렇게 되면, 도메인만 이해하게 되면 코드를 이해하게 되고, 코드를 이해하게 되면 소프트웨어를 이해하고 수정하기 쉽게 만들어주게 된다.

또한, 도메인 모델은 사용자들이 도메인을 바라보는 관점이라고도 표현했는데 사용자 관점(사용자 모델)을 기반으로 설계하면 사용자들의 변화하는 요구사항에 빠르게 대처가 가능하며 이것이 도메인 모델이 안정적인 구조를 제공할 수 있다는 것을 의미한다.


## 기능 - 유스케이스
> 기능 => 사용자의 목표를 만족시키기 위해 책임을 수행하는 시스템의 행위로 표현
> 유스케이스 모델링 => 기능을 수집하고 표현하기 위한 기법
> 유즈케이스 모델 => 유스케이스 모델링의 활동 결과물

아무리 안정적이여도 사용자가 원하는 기능이 해당 소프트웨어에 없다면 사용자는 소프트웨어를 사용할 이유가 사라진다.
그래서 유스케이스는 사용자의 목표를 달성하기 위해 사용자와 시스템 간에 이뤄지는 상호작용의 흐름을 `텍스트`로 정리한 것이다.

유스케이스의 특징은 다음과 같다.
1. **사용자와 시스템 간의 상호작용을 보여주는 텍스트**
    유스케이스는 단순히 다이어그램이 아닌 상호작용을 이야기로 풀어낸 것이다.
    
2. **하나의 시나리오가 아니라 여러 시나라오들의 집합**
    시나리오는 유스케이스를 통해 시스템을 사용하는 이야기로 유스케이스는 시스템 이용방법이다.
    
3. **단순한 피처(시스템이 수행해야 하는 기능의 목록의 나열) 목록과 다름**
    위의 특징과 비슷한데 단순 기능 나열이 아닌 연관된 기능들을 묶어 이야기로 풀어낼 수 있다.
    
4. **사용자 인터페이스와 관련된 세부 정보를 포함하지 않음**
    자주 변경되는 사용자 인터페이스는 배제하고 사용자 관점에서 시스템의 행위에 초점을 맞춘다.

5. **내부 설계와 관련된 정보를 포함하지 않음**
    기능적 요구사항을 사용자의 목표 중심으로 묶기 위한 정리 기법이지 객체의 구조나 책임에 대한 정보를 제공하지 않는다.
    
    
## 기능 + 구조
도메인 모델은 안정적인 구조를 개념화하기 위해서, 유스케이스는 불안정한 기능을 서술하기 위해 사용되는 가장 일반적인 도구다.
잦은 변경에 유연하게 하기 위해서 유스케이스에 정리된 기능들을 도메인 모델을 기반으로 한 객체들의 책임으로 분배해야 한다.

객체지향에서는 모든 것이 객체이기 때문에 하나의 시스템 또한 객체라고 생각한다.
이 시스템이 수행하는 책임은 그 속에 있는 작은 객체들의 협력을 통해서 구현되고 작은 객체들의 협력은 작은 객체들이 수행해야하는 책임으로 세분화 된다.
여기서부터 도메인 모델에 포함된 개념을 은유를 통해서 객체를 선택해야 한다. -> `표현적 차이 줄이기`
또한, 협력하는데 필요한 메세지들을 찾아내면서 객체들에게 책임을 할당해 나간다.
그 다음 객체들을 구현하기 위해서 클래스, 속성, 메서드를 구현하게 되면 시스템의 기능이 완성되는 것 이다.

위의 과정에서 설계를 보면 다음과 같다.
- 유스케이스 -> 사용자의 목표 달성을 위한 기능을 시스템의 책임으로 생각하게 해 객체 간의 안정적인 구조에 책임을 분배 가능하게 함
- 도메인 모델 -> 기능을 수용하기 위해 은유할 수 있는 구조를 제공
- 책임-주도 설계 -> 유스케이스로 부터 목표와 메세지를, 도메인 모델로 부터 기능을 수용할 수 있는 구조를 제공받아 객체들의 협력 공동체를 창조

근데 위의 3가지가 반드시 필요하다, 사용되는 것이 아니라 체계적인 절차를 통해서 사용자의 관점에서 시스템의 기능을 명시하고 안정적인 구조를 기반으로 기능을 책임으로 변환해야 하는게 중요한 포인트다.

# 결론
도메인 모델과 소스코드를 연관시키기 위해 노력하면 유지보수하기 쉽고 유연한 객체지향 시스템을 만들 수 있다.
그러기 위해선 사용자들의 목표가 잘 정리된 유스케이스를 통해서 시스템의 책임을 정의하고, 도메인 모델을 통해 시스템 책임을 구현하기 위한 작은 객체들의 협력과 더 작은 객체들의 책임을 수행할 수 있는 객체를 은유를 통해서 객체를 선택해야한다.

결국 이 모든 것은 객체지향을 통해서 변화에 유연하면서 안정적인 시스템을 개발하기 위한 첫 발걸음이다.

# 나의 생각
사실 이 챕터 읽기 전에는 완벽하게 도메인 모델이 뭔지, 유스케이스가 뭔지 몰랐고 단편적으로 "그냥 어떤 것들이구나" 정도로만 이해하고 있었다.
생각보다 더 중요한 부분이였고 하나의 기능을 개발하더라도 그 기능을 통해서 원하는 목표를 생각하고 그것을 중심으로 개발을 해야겠다는 생각이 들었다.

